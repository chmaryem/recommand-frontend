/* ========== Variables ========== */
:root{
  --color-primary:#667eea; --color-primary-light:#764ba2;
  --color-success:#10b981; --color-warning:#f59e0b;
  --color-error:#ef4444;   --color-info:#3b82f6;

  --color-happy:#fbbf24; --color-confident:#8b5cf6; --color-relaxed:#10b981;
  --color-energetic:#f97316; --color-romantic:#ec4899; --color-surprise:#06b6d4; --color-sad:#6b7280;

  --color-background:#f8fafc; --color-white:#fff;
  --color-gray-50:#f9fafb; --color-gray-100:#f3f4f6; --color-gray-200:#e5e7eb;
  --color-gray-300:#d1d5db; --color-gray-400:#9ca3af; --color-gray-500:#6b7280;
  --color-gray-600:#4b5563; --color-gray-700:#374151; --color-gray-800:#1f2937; --color-gray-900:#111827;

  --shadow-sm:0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md:0 4px 6px -1px rgb(0 0 0 / 0.1),0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg:0 10px 15px -3px rgb(0 0 0 / 0.1),0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl:0 20px 25px -5px rgb(0 0 0 / 0.1),0 8px 10px -6px rgb(0 0 0 / 0.1);

  --radius-sm:.375rem; --radius-md:.5rem; --radius-lg:.75rem; --radius-xl:1rem;
}

/* ========== Base ========== */
*{box-sizing:border-box}
.admin-dashboard{min-height:100vh;background:var(--color-background);font-family:Inter,Segoe UI,Roboto,sans-serif;color:var(--color-gray-800);line-height:1.5;position:relative}

/* Loading */
.loading-overlay{position:fixed;inset:0;background:rgba(255,255,255,.9);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:1000}
.loading-spinner{color:var(--color-gray-600);text-align:center}
.spinner{width:40px;height:40px;border:3px solid var(--color-gray-200);border-top:3px solid var(--color-primary);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 1rem}
@keyframes spin{to{transform:rotate(360deg)}}

/* Header */
.header{background:linear-gradient(135deg,var(--color-primary),var(--color-primary-light));color:#fff;padding:2rem 0;box-shadow:var(--shadow-lg)}
.header-content{max-width:1400px;margin:0 auto;padding:0 2rem;display:flex;justify-content:space-between;align-items:center;gap:2rem}
.header-left h1{font-size:2rem;font-weight:700;margin:0 0 .5rem;background:linear-gradient(45deg,#fff,#f1f5f9);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:#385b7e}
.subtitle{margin:0;opacity:.9;font-size:1.1rem}
.header-right{display:flex;align-items:center;gap:1rem}

/* Buttons / Select */
.btn{display:inline-flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border:none;border-radius:var(--radius-md);font-weight:600;font-size:.95rem;cursor:pointer;transition:.2s;outline:none}
.btn:focus{box-shadow:0 0 0 3px rgba(33,39,68,.3)}
.btn.primary{background:linear-gradient(135deg,#413280,#578edb);color:var(--color-primary);box-shadow:var(--shadow-sm)}
.btn.primary:hover:not(:disabled){transform:translateY(-1px);box-shadow:var(--shadow-md)}
.btn.ghost{background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.2);font-size:1.2rem;padding:.75rem}
.btn.ghost:hover:not(:disabled){background:rgba(255,255,255,.2)}
.btn:disabled{opacity:.6;cursor:not-allowed}
.select{padding:.75rem 1rem;border:1px solid rgba(255,255,255,.2);border-radius:var(--radius-md);background:rgba(255,255,255,.1);color:#fff;font-size:.95rem;outline:none}
.select option{background:#fff;color:var(--color-gray-800)}

/* Tabs */
.tabs{background:#fff;border-bottom:1px solid var(--color-gray-200);display:flex;max-width:1400px;margin:0 auto;padding:0 2rem}
.tab{padding:1rem 2rem;border:none;background:none;color:var(--color-gray-600);font-weight:500;font-size:.95rem;cursor:pointer;border-bottom:3px solid transparent;transition:.2s}
.tab:hover{color:var(--color-primary);background:var(--color-gray-50)}
.tab.active{color:var(--color-primary);border-bottom-color:var(--color-primary);background:linear-gradient(to bottom,transparent,rgba(102,126,234,.05))}

/* Content */
.content{max-width:1400px;margin:0 auto;padding:2rem}
.panel{display:flex;flex-direction:column;gap:2rem}

/* Cards */
.card{background:#fff;border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);border:1px solid var(--color-gray-100);transition:.3s;overflow:hidden}
.card:hover{transform:translateY(-2px);box-shadow:var(--shadow-xl)}
.card-title{font-size:1.25rem;font-weight:700;color:var(--color-gray-800);margin:0 0 1.5rem;padding:1.5rem 1.5rem 0}

/* KPI Grid */
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}
.kpi{padding:2rem;background:linear-gradient(135deg,rgba(162,177,202,.05),rgba(162,177,202,.05));border-left:4px solid var(--color-primary);position:relative;overflow:hidden}
.kpi:nth-child(1){border-left-color:var(--color-info);background:linear-gradient(135deg,rgba(59,130,246,.05),rgba(59,130,246,.1))}
.kpi:nth-child(2){border-left-color:var(--color-success);background:linear-gradient(135deg,rgba(16,185,129,.05),rgba(16,185,129,.1))}
.kpi:nth-child(3){border-left-color:var(--color-warning);background:linear-gradient(135deg,rgba(245,158,11,.05),rgba(245,158,11,.1))}
.kpi:nth-child(4){border-left-color:var(--color-primary);background:linear-gradient(135deg,rgba(102,126,234,.05),rgba(102,126,234,.1))}
.kpi::before{content:"";position:absolute;top:-50%;right:-50%;width:100%;height:100%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%)}
.kpi-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
.kpi-label{font-size:.95rem;font-weight:600;color:var(--color-gray-600);text-transform:uppercase;letter-spacing:.05em}
.kpi-trend{font-size:.85rem;font-weight:600;padding:.25rem .5rem;border-radius:var(--radius-sm)}
.kpi-trend.positive{background:rgba(16,185,129,.1);color:var(--color-success)}
.kpi-trend.negative{background:rgba(239,68,68,.1);color:var(--color-error)}
.kpi-value{font-size:2.5rem;font-weight:800;color:var(--color-gray-800);line-height:1}

/* Activity Chart */
/* Styles pour le conteneur du graphique */
/* Styles pour le conteneur du graphique - VERSION CORRIGÉE */
.activity-svg-wrap {
  width: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  padding: 1rem 0;
  min-height: 280px;
  display: flex;
  align-items: center;
  justify-content: flex-start; /* Changé de center à flex-start */
  background: rgba(255, 255, 255, 0.7);
  border-radius: 12px;
  margin: 0.5rem 0;
}
/* Backdrop */
.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: 16px;
}

/* Carte modale */
.modal {
  background: #d1b6db;
 margin-left: 500px;
  width: 100%;
  max-width: 680px;
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0,0,0,.2);
  outline: none;
  display: flex;
  flex-direction: column;
  max-height: 90vh;
}

.modal-header,
.modal-footer {
  padding: 16px 20px;
  border-bottom: 1px solid rgba(0,0,0,.06);
}

.modal-footer { border-top: 1px solid rgba(0,0,0,.06); border-bottom: none; }

.modal-body {
  padding: 16px 20px;
  overflow: auto;
}

.icon-btn.close {
  margin-left: auto;
}

.user-hero {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 12px;
}

.avatar.lg {
  width: 48px;
  height: 48px;
  border-radius: 999px;
  display: grid;
  place-items: center;
  color: #fff;
  font-weight: 700;
}

.detail-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: grid;
  gap: 8px;
}

.stars { letter-spacing: 2px; }
.stars .filled { color: #f5a524; }


/* Styles pour la card d'activité */
.activity {
  padding: 1.5rem;
  background: linear-gradient(135deg, rgba(102,126,234,.05) 20%, rgba(102,126,234,.1) 100%);
  min-height: 340px;
  display: flex;
  flex-direction: column;
}

/* SVG responsive */
.activity svg {
  width: 100%;
  min-width: 100%; /* Assurer que le SVG prend toute la largeur */
  height: auto;
  flex-shrink: 0;
}

/* Barres du graphique */
.svg-bar {
  transition: all 0.2s ease;
}

.svg-bar:hover {
  opacity: 0.8;
  transform: translateY(-1px);
  filter: brightness(1.1);
}

.svg-recos {
  fill: rgba(102, 126, 234, 0.9);
}

.svg-users {
  fill: rgba(16, 185, 129, 0.9);
}

/* Étiquettes */
.svg-label {
  fill: #64748b;
  font-weight: 500;
  font-size: 11px;
}

.svg-tick-label {
  fill: #64748b;
  font-size: 10px;
}

.svg-legend {
  fill: #334155;
  font-weight: 500;
}

/* Message absence de données */
.no-data-message {
  text-align: center;
  color: #94a3b8;
  font-style: italic;
  padding: 2rem;
  width: 100%;
}

/* Responsive amélioré */
@media (max-width: 768px) {
  .activity-svg-wrap {
    min-height: 240px;
    padding: 0.5rem 0;
  }

  .svg-label {
    font-size: 9px;
  }

  .activity {
    min-height: 300px;
    padding: 1rem;
  }
}

@media (max-width: 640px) {
  .activity-svg-wrap {
    padding: 0.25rem 0;
    min-height: 200px;
  }

  .svg-label {
    font-size: 8px;
  }
}

/* Animation d'apparition */
svg {
  opacity: 0;
  animation: fadeIn 0.5s ease-in-out forwards;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.legend{display:flex;justify-content:center;gap:2rem;font-size:.9rem;color:var(--color-gray-600);margin-top:1rem}
.dot{position:relative;padding-left:1.5rem}
.dot::before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:12px;height:12px;border-radius:50%}
.dot.recos::before{background:var(--color-primary)}
.dot.users::before{background:var(--color-success)}

/* Split Grid */
.split-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:1.5rem}
.split-grid .card{padding:2rem}

/* Distribution Lists */
.dist-list{list-style:none;margin:0;padding:0}
.dist-list li{display:flex;align-items:center;gap:1rem;padding:.75rem 0;border-bottom:1px solid var(--color-gray-100)}
.dist-list li:last-child{border-bottom:none}

/* Badges */
.badge{padding:.5rem 1rem;border-radius:var(--radius-lg);font-size:.85rem;font-weight:600;text-transform:capitalize;min-width:80px;text-align:center;color:#363535}
.badge.small{padding:.25rem .75rem;font-size:.8rem;min-width:auto}
.emotion-happy{background:rgba(251,191,36,.3)}
.emotion-confident{background:rgba(139,92,246,.3)}
.emotion-relaxed{background:rgba(16,185,129,.3)}
.emotion-energetic{background:rgba(249,115,22,.3)}
.emotion-romantic{background:rgba(236,72,153,.3)}
.emotion-surprise{background:rgba(6,182,212,.3)}
.emotion-sad{background:rgba(107,114,128,.3)}

/* Bars */
.bar-line{flex:1;height:8px;background:rgba(121,158,123,.5);border-radius:var(--radius-sm);overflow:hidden}
.bar-fill{height:100%;border-radius:var(--radius-sm);transition:width .8s}
.bar-fill.primary{background:linear-gradient(90deg,rgba(131,77,135,.7),rgba(229,163,244,.7))}
.bar-fill.success{background:linear-gradient(90deg,rgba(56,105,76,.7),rgba(16,185,129,.7))}
.pct{font-weight:600;color:var(--color-gray-700);min-width:45px;text-align:right}

/* Weather Labels */
.w-label{display:flex;align-items:center;gap:.5rem;min-width:100px;font-weight:500;text-transform:capitalize}
.w-ico{font-size:1.2rem}

/* Filters */
.filters{padding:1.5rem;background:linear-gradient(135deg,#fff 0%,rgba(102,126,234,.02) 100%)}
.filters-row{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}
.filters-row label{font-weight:600;color:var(--color-gray-700)}
.filters-row .select{border:1px solid var(--color-gray-300);background:#fff;color:var(--color-gray-800);padding:.75rem 1rem;border-radius:var(--radius-md);font-size:.95rem}
.count{margin-left:auto;padding:.5rem 1rem;background:rgba(102,126,234,.1);color:var(--color-primary);border-radius:var(--radius-lg);font-weight:600;font-size:.9rem}

/* Table */
.table-card{padding:0;overflow:hidden}
.table-head{padding:1.5rem;border-bottom:1px solid var(--color-gray-200);background:linear-gradient(135deg,var(--color-gray-50) 0%,#fff 100%)}
.table-head h3{margin:0;font-size:1.25rem;font-weight:700;color:var(--color-gray-800)}
.table-wrap{overflow-x:auto}
.modern-table{width:100%;border-collapse:collapse;font-size:.9rem}
.modern-table th{background:var(--color-gray-50);padding:1rem;text-align:left;font-weight:600;color:var(--color-gray-700);border-bottom:1px solid var(--color-gray-200);white-space:nowrap;text-transform:uppercase;font-size:.8rem;letter-spacing:.05em}
.modern-table td{padding:1rem;border-bottom:1px solid var(--color-gray-100);vertical-align:middle}
.modern-table tbody tr{transition:background-color .2s}
.modern-table tbody tr:hover{background:rgba(102,126,234,.02)}

/* User Cell */
.user-cell{display:flex;align-items:center;gap:.75rem}
.avatar{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:1rem;flex-shrink:0;box-shadow:var(--shadow-sm)}
.u-name{font-weight:600;color:var(--color-gray-800)}
.u-id{font-size:.8rem;color:var(--color-gray-500)}

/* Stars */
.stars{display:flex;gap:1px}
.stars span{color:var(--color-gray-300);font-size:1.1rem}
.stars span.filled{color:#fbbf24}

/* Temperature */
.hot{color:var(--color-error);font-weight:600}
.cold{color:var(--color-info);font-weight:600}

/* Actions */
.actions{display:flex;gap:.5rem}
.icon-btn{padding:.5rem;border:none;background:var(--color-gray-100);border-radius:var(--radius-sm);cursor:pointer;transition:.2s;font-size:.9rem}
.icon-btn:hover{background:var(--color-gray-200);transform:scale(1.05)}

/* Utilities */
.ellipsis{max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.muted{color:var(--color-gray-500);font-size:.85rem}
.fade-transition{opacity:.5;transition:opacity .3s}

/* Responsive */
@media (max-width:1024px){
  .header-content{flex-direction:column;gap:1rem}
  .header-right{justify-content:center}
  .content{padding:1rem}
  .kpi-grid{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem}
  .split-grid{grid-template-columns:1fr}
}
@media (max-width:768px){
  .tabs{padding:0 1rem}
  .tab{padding:1rem}
  .modern-table{font-size:.8rem}
  .modern-table th,.modern-table td{padding:.75rem .5rem}
  .filters-row{flex-direction:column;align-items:stretch}
  .count{margin-left:0;text-align:center}
  .activity-svg-wrap{min-height:180px}
  .svg-label{font-size:10px}
}
@media (max-width:640px){
  .header-content{padding:0 1rem}
  .header-left h1{font-size:1.5rem}
  .kpi-grid{grid-template-columns:1fr}
  .user-cell{flex-direction:column;text-align:center;gap:.5rem}
  .activity-svg-wrap{padding:0 .25rem}
}

/* Animations */
@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
.card{animation:fadeInUp .6s ease-out}
.kpi:nth-child(1){animation-delay:.1s}
.kpi:nth-child(2){animation-delay:.2s}
.kpi:nth-child(3){animation-delay:.3s}
.kpi:nth-child(4){animation-delay:.4s}
.card:hover .kpi-value{transform:scale(1.05);transition:transform .3s}
