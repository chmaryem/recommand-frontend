<div class="login-background">
  <div class="login-glass-card">
    <h2>Forgot Password</h2>

    <!-- Step 1: Email -->
    <form *ngIf="step === 1" (ngSubmit)="sendOtp()">
      <input type="email" [(ngModel)]="email" name="email" class="email-input" placeholder="Enter your email" required>
      <button type="submit">Send OTP</button>
    </form>

    <!-- Step 2: OTP -->
    <form *ngIf="step === 2" (ngSubmit)="verifyOtp()">
      <div class="code-inputs">
        <input *ngFor="let digit of otpDigits; let i = index"
               maxlength="1"
               inputmode="numeric"
               type="text"
               class="code-box"
               [(ngModel)]="otpArray[i]"
               name="otp{{i}}"
               (input)="onDigitInput(i, $event)"
               (keydown)="onKeyDown(i, $event)"
               autocomplete="one-time-code">
      </div>
      <button type="submit">Verify OTP</button>
    </form>

    <!-- Step 3: New Password -->
    <form *ngIf="step === 3" (ngSubmit)="changePassword()">
      <input type="password" [(ngModel)]="password" name="password" class="email-input" placeholder="New Password" required>
      <input type="password" [(ngModel)]="repeatPassword" name="repeatPassword" class="email-input" placeholder="Repeat Password" required>
      <button type="submit">Change Password</button>
    </form>

    <!-- Step 4: Success -->
    <p *ngIf="step === 4" class="success-message">âœ… Password changed! You can now log in.</p>
    

    <!-- Feedback -->
    <p *ngIf="message" class="message">{{ message }}</p>
  </div>
</div>
