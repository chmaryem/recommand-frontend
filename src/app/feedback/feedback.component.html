<div class="page-layout">
  <!-- Sidebar -->
  <div class="sidebar-section">
    <app-sidebare></app-sidebare>
  </div>

<main class="main-section">
<div class="feedback-container">

  <!-- En-tÃªte du feedback -->
  <div class="feedback-header">
    <h3 class="feedback-title">
      <span class="feedback-icon">ğŸ’­</span>
      Que pensez-vous de cette tenue ?
    </h3>
    <p class="feedback-subtitle">Votre avis nous aide Ã  amÃ©liorer nos suggestions</p>
  </div>

  <!-- AperÃ§u de la tenue -->
  <div class="outfit-preview">
    <div class="outfit-items">
      <div *ngFor="let item of outfitItems" class="outfit-item">
        <div class="item-icon" [class]="'item-' + item.type">
          <ng-container [ngSwitch]="item.type">
            <span *ngSwitchCase="'tshirt'">ğŸ‘•</span>
            <span *ngSwitchCase="'jean'">ğŸ‘–</span>
            <span *ngSwitchCase="'baskets'">ğŸ‘Ÿ</span>
            <span *ngSwitchCase="'blouse'">ğŸ‘š</span>
            <span *ngSwitchCase="'short'">ğŸ©³</span>
            <span *ngSwitchCase="'sandales'">ğŸ‘¡</span>
            <span *ngSwitchDefault>ğŸ‘”</span>
          </ng-container>
        </div>
        <span class="item-name">{{ item.name }}</span>
      </div>
    </div>
    <div class="style-badge" [class]="'style-' + style">
      {{ style === 'sunny' ? 'Look EnsoleillÃ© & Joyeux' : 'Alternative Chic' }}
    </div>
  </div>

  <!-- Feedback principal : Like/Dislike -->
  <div class="feedback-main" *ngIf="!showDetailedFeedback">
    <div class="feedback-buttons">
      <button
        class="feedback-btn like-btn"
        [class.active]="liked === true"
        (click)="setLike(true)"
        type="button">
        <span class="btn-icon">ğŸ‘</span>
        <span class="btn-text">J'aime</span>
      </button>

      <button
        class="feedback-btn dislike-btn"
        [class.active]="liked === false"
        (click)="setLike(false)"
        type="button">
        <span class="btn-icon">ğŸ‘</span>
        <span class="btn-text">J'aime pas</span>
      </button>
    </div>

    <button class="skip-btn" (click)="skipFeedback()" type="button">
      Passer
    </button>
  </div>

  <!-- Feedback dÃ©taillÃ© -->
  <div class="feedback-detailed" *ngIf="showDetailedFeedback">

    <!-- Notation par Ã©toiles -->
    <div class="rating-section">
      <label class="section-label">Notez cette tenue :</label>
      <div class="stars-container">
        <button
          *ngFor="let star of [1,2,3,4,5]; let i = index"
          class="star-btn"
          [class.filled]="i < rating"
          (click)="setRating(i + 1)"
          type="button">
          â­
        </button>
      </div>
    </div>

    <!-- Tags de feedback -->
    <div class="tags-section">
      <label class="section-label">
        {{ liked ? 'Ce que vous aimez :' : 'Ce qui ne va pas :' }}
      </label>
      <div class="tags-grid">
        <button
          *ngFor="let tag of getFilteredTags()"
          class="tag-btn"
          [class.selected]="isTagSelected(tag.id)"
          (click)="toggleTag(tag.id)"
          type="button">
          <span class="tag-icon">{{ tag.icon }}</span>
          <span class="tag-label">{{ tag.label }}</span>
        </button>
      </div>
    </div>

    <!-- Commentaire -->
    <div class="comment-section">
      <label class="section-label" for="comment">Commentaire (optionnel) :</label>
      <textarea
        id="comment"
        class="comment-input"
        [(ngModel)]="comment"
        placeholder="Partagez vos impressions sur cette tenue..."
        rows="3"
        maxlength="200">
      </textarea>
      <div class="char-count">{{ comment.length }}/200</div>
    </div>

    <!-- Boutons d'action -->
    <div class="action-buttons">
      <button class="btn-secondary" (click)="resetFeedback()" type="button">
        Annuler
      </button>
      <button class="btn-primary" (click)="submitFeedback()" type="button">
        <span class="btn-icon">ğŸ“¤</span>
        Envoyer le feedback
      </button>
    </div>
  </div>

  <!-- Message de confirmation -->
  <div class="feedback-success" *ngIf="false">
    <div class="success-content">
      <span class="success-icon">âœ…</span>
      <h4>Merci pour votre feedback !</h4>
      <p>Vos prÃ©fÃ©rences ont Ã©tÃ© enregistrÃ©es</p>
    </div>
  </div>
</div>
</main>
</div>
